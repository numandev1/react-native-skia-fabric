{"version":3,"sources":["VerticesNode.ts"],"names":["VertexMode","BlendMode","NodeType","enumKey","processColor","JsiDrawingNode","VerticesNode","constructor","ctx","props","Vertices","deriveProps","mode","vertices","textures","colors","indices","vertexMode","Triangles","Skia","MakeVertices","map","c","undefined","draw","canvas","paint","blendMode","defaultBlendMode","DstOver","SrcOver","blend","derived","Error","drawVertices"],"mappings":"AACA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,qBAAtC;AAEA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,cAAtC;AACA,SAASC,cAAT,QAA+B,gBAA/B;AAGA,OAAO,MAAMC,YAAN,SAA2BD,cAA3B,CAAqE;AAC1EE,EAAAA,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAyC;AAClD,UAAMD,GAAN,EAAWN,QAAQ,CAACQ,QAApB,EAA8BD,KAA9B;AACD;;AAESE,EAAAA,WAAW,GAAG;AACtB,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,QAAR;AAAkBC,MAAAA,QAAlB;AAA4BC,MAAAA,MAA5B;AAAoCC,MAAAA;AAApC,QAAgD,KAAKP,KAA3D;AACA,UAAMQ,UAAU,GAAGL,IAAI,GAAGZ,UAAU,CAACG,OAAO,CAACS,IAAD,CAAR,CAAb,GAA+BZ,UAAU,CAACkB,SAAjE;AACA,WAAO,KAAKC,IAAL,CAAUC,YAAV,CACLH,UADK,EAELJ,QAFK,EAGLC,QAHK,EAILC,MAAM,GAAGA,MAAM,CAACM,GAAP,CAAYC,CAAD,IAAOlB,YAAY,CAAC,KAAKe,IAAN,EAAYG,CAAZ,EAAe,CAAf,CAA9B,CAAH,GAAsDC,SAJvD,EAKLP,OALK,CAAP;AAOD;;AAEDQ,EAAAA,IAAI,OAAoC;AAAA,QAAnC;AAAEC,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAmC;AACtC,UAAM;AAAEX,MAAAA,MAAF;AAAUY,MAAAA;AAAV,QAAwB,KAAKlB,KAAnC;AACA,UAAMmB,gBAAgB,GAAGb,MAAM,GAAGd,SAAS,CAAC4B,OAAb,GAAuB5B,SAAS,CAAC6B,OAAhE;AACA,UAAMC,KAAK,GAAGJ,SAAS,GAAG1B,SAAS,CAACE,OAAO,CAACwB,SAAD,CAAR,CAAZ,GAAmCC,gBAA1D;;AACA,QAAI,KAAKI,OAAL,KAAiBT,SAArB,EAAgC;AAC9B,YAAM,IAAIU,KAAJ,CAAU,qCAAV,CAAN;AACD;;AACDR,IAAAA,MAAM,CAACS,YAAP,CAAoB,KAAKF,OAAzB,EAAkCD,KAAlC,EAAyCL,KAAzC;AACD;;AAzByE","sourcesContent":["import type { SkVertices } from \"../../../skia/types\";\nimport { VertexMode, BlendMode } from \"../../../skia/types\";\nimport type { DrawingContext, VerticesProps } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { enumKey, processColor } from \"../datatypes\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\n\nexport class VerticesNode extends JsiDrawingNode<VerticesProps, SkVertices> {\n  constructor(ctx: NodeContext, props: VerticesProps) {\n    super(ctx, NodeType.Vertices, props);\n  }\n\n  protected deriveProps() {\n    const { mode, vertices, textures, colors, indices } = this.props;\n    const vertexMode = mode ? VertexMode[enumKey(mode)] : VertexMode.Triangles;\n    return this.Skia.MakeVertices(\n      vertexMode,\n      vertices,\n      textures,\n      colors ? colors.map((c) => processColor(this.Skia, c, 1)) : undefined,\n      indices\n    );\n  }\n\n  draw({ canvas, paint }: DrawingContext) {\n    const { colors, blendMode } = this.props;\n    const defaultBlendMode = colors ? BlendMode.DstOver : BlendMode.SrcOver;\n    const blend = blendMode ? BlendMode[enumKey(blendMode)] : defaultBlendMode;\n    if (this.derived === undefined) {\n      throw new Error(\"VerticesNode: vertices is undefined\");\n    }\n    canvas.drawVertices(this.derived, blend, paint);\n  }\n}\n"]}