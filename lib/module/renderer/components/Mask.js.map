{"version":3,"sources":["Mask.tsx"],"names":["React","useMemo","BlendMode","useCanvas","Group","Mask","children","mask","mode","clip","Skia","maskPaint","paint","Paint","setBlendMode","Src","setColorFilter","ColorFilter","MakeLumaColorFilter","clippingPaint","DstIn","defaultProps"],"mappings":"AACA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AAEA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,SAAT,QAA0B,cAA1B;AAEA,SAASC,KAAT,QAAsB,SAAtB;AASA,OAAO,MAAMC,IAAI,GAAG,QAA+C;AAAA,MAA9C;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,IAAZ;AAAkBC,IAAAA,IAAlB;AAAwBC,IAAAA;AAAxB,GAA8C;AACjE,QAAM;AAAEC,IAAAA;AAAF,MAAWP,SAAS,EAA1B;AACA,QAAMQ,SAAS,GAAGV,OAAO,CAAC,MAAM;AAC9B,UAAMW,KAAK,GAAGF,IAAI,CAACG,KAAL,EAAd;AACAD,IAAAA,KAAK,CAACE,YAAN,CAAmBZ,SAAS,CAACa,GAA7B;;AACA,QAAIP,IAAI,KAAK,WAAb,EAA0B;AACxBI,MAAAA,KAAK,CAACI,cAAN,CAAqBN,IAAI,CAACO,WAAL,CAAiBC,mBAAjB,EAArB;AACD;;AACD,WAAON,KAAP;AACD,GAPwB,EAOtB,CAACF,IAAD,EAAOF,IAAP,CAPsB,CAAzB;AAQA,QAAMW,aAAa,GAAGlB,OAAO,CAAC,MAAM;AAClC,UAAMW,KAAK,GAAGF,IAAI,CAACG,KAAL,EAAd;AACAD,IAAAA,KAAK,CAACE,YAAN,CAAmBZ,SAAS,CAACkB,KAA7B;AACA,WAAOR,KAAP;AACD,GAJ4B,EAI1B,CAACF,IAAD,CAJ0B,CAA7B;AAKA,sBACE,oBAAC,KAAD;AAAO,IAAA,KAAK;AAAZ,kBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEC;AAAd,KACGJ,IADH,EAEGE,IAAI,iBAAI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEU;AAAd,KAA8Bb,QAA9B,CAFX,CADF,eAKE,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC;AAAjB,KAA0BA,QAA1B,CALF,CADF;AASD,CAxBM;AA0BPD,IAAI,CAACgB,YAAL,GAAoB;AAClBb,EAAAA,IAAI,EAAE,OADY;AAElBC,EAAAA,IAAI,EAAE;AAFY,CAApB","sourcesContent":["import type { ReactNode } from \"react\";\nimport React, { useMemo } from \"react\";\n\nimport { BlendMode } from \"../../skia/types\";\nimport { useCanvas } from \"../useCanvas\";\n\nimport { Group } from \"./Group\";\n\ninterface MaskProps {\n  mode: \"luminance\" | \"alpha\";\n  clip: boolean;\n  mask: ReactNode | ReactNode[];\n  children: ReactNode | ReactNode[];\n}\n\nexport const Mask = ({ children, mask, mode, clip }: MaskProps) => {\n  const { Skia } = useCanvas();\n  const maskPaint = useMemo(() => {\n    const paint = Skia.Paint();\n    paint.setBlendMode(BlendMode.Src);\n    if (mode === \"luminance\") {\n      paint.setColorFilter(Skia.ColorFilter.MakeLumaColorFilter());\n    }\n    return paint;\n  }, [Skia, mode]);\n  const clippingPaint = useMemo(() => {\n    const paint = Skia.Paint();\n    paint.setBlendMode(BlendMode.DstIn);\n    return paint;\n  }, [Skia]);\n  return (\n    <Group layer>\n      <Group layer={maskPaint}>\n        {mask}\n        {clip && <Group layer={clippingPaint}>{children}</Group>}\n      </Group>\n      <Group blendMode=\"srcIn\">{children}</Group>\n    </Group>\n  );\n};\n\nMask.defaultProps = {\n  mode: \"alpha\",\n  clip: true,\n};\n"]}