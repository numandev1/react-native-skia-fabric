{"version":3,"sources":["RNSkAnimation.ts"],"names":["RNSkAnimation","RNSkClockValue","constructor","callback","raf","undefined","_callback","cancel","stop","update","nextValue","_animationState","finished","current"],"mappings":";;;;;;;AAEA;;;;AAEO,MAAMA,aAAN,SACGC,8BADH,CAGP;AACEC,EAAAA,WAAW,CACTC,QADS,EAETC,GAFS,EAGT;AACA,UAAMA,GAAN;;AADA;;AAAA,6CAMuCC,SANvC;;AAEA,SAAKC,SAAL,GAAiBH,QAAjB;AACD;;AAKMI,EAAAA,MAAM,GAAG;AACd,SAAKC,IAAL;AACD;;AAESC,EAAAA,MAAM,CAACC,SAAD,EAA0B;AAAA;;AACxC,QAAI,KAAKJ,SAAT,EAAoB;AAAA;;AAClB,WAAKK,eAAL,GAAuB,KAAKL,SAAL,CAAeI,SAAf,EAA0B,KAAKC,eAA/B,CAAvB;;AACA,mCAAI,KAAKA,eAAT,kDAAI,sBAAsBC,QAA1B,EAAoC;AAClC,aAAKJ,IAAL;AACD;AACF;;AACD,UAAMC,MAAN,qDAAa,KAAKE,eAAlB,2DAAa,uBAAsBE,OAAnC,2EAA8CH,SAA9C;AACD;;AAxBH","sourcesContent":["import type { AnimationState, SkiaAnimation } from \"../types\";\n\nimport { RNSkClockValue } from \"./RNSkClockValue\";\n\nexport class RNSkAnimation<S extends AnimationState = AnimationState>\n  extends RNSkClockValue\n  implements SkiaAnimation\n{\n  constructor(\n    callback: (t: number, state: S | undefined) => S,\n    raf: (callback: (time: number) => void) => number\n  ) {\n    super(raf);\n    this._callback = callback;\n  }\n\n  private _callback: (t: number, state: S | undefined) => S;\n  private _animationState: S | undefined = undefined;\n\n  public cancel() {\n    this.stop();\n  }\n\n  protected update(nextValue: number): void {\n    if (this._callback) {\n      this._animationState = this._callback(nextValue, this._animationState);\n      if (this._animationState?.finished) {\n        this.stop();\n      }\n    }\n    super.update(this._animationState?.current ?? nextValue);\n  }\n}\n"]}