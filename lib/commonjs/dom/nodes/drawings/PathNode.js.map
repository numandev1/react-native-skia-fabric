{"version":3,"sources":["PathNode.ts"],"names":["PathNode","JsiDrawingNode","constructor","ctx","props","NodeType","Path","deriveProps","start","end","fillType","stroke","pathProps","hasStartOffset","hasEndOffset","hasStrokeOptions","undefined","hasFillType","willMutatePath","pristinePath","Skia","path","copy","setFillType","FillType","trim","draw","canvas","paint","derived","Error","drawPath"],"mappings":";;;;;;;AAAA;;AAGA;;AACA;;AACA;;AAGO,MAAMA,QAAN,SAAuBC,2BAAvB,CAAyD;AAC9DC,EAAAA,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAqC;AAC9C,UAAMD,GAAN,EAAWE,iBAASC,IAApB,EAA0BF,KAA1B;AACD;;AAESG,EAAAA,WAAW,GAAG;AACtB,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA,GAAT;AAAcC,MAAAA,QAAd;AAAwBC,MAAAA,MAAxB;AAAgC,SAAGC;AAAnC,QAAiD,KAAKR,KAA5D;AACA,UAAMS,cAAc,GAAGL,KAAK,KAAK,CAAjC;AACA,UAAMM,YAAY,GAAGL,GAAG,KAAK,CAA7B;AACA,UAAMM,gBAAgB,GAAGJ,MAAM,KAAKK,SAApC;AACA,UAAMC,WAAW,GAAG,CAAC,CAACP,QAAtB;AACA,UAAMQ,cAAc,GAClBL,cAAc,IAAIC,YAAlB,IAAkCC,gBAAlC,IAAsDE,WADxD;AAEA,UAAME,YAAY,GAAG,4BAAY,KAAKC,IAAjB,EAAuBR,SAAS,CAACS,IAAjC,CAArB;AACA,UAAMA,IAAI,GAAGH,cAAc,GAAGC,YAAY,CAACG,IAAb,EAAH,GAAyBH,YAApD;;AACA,QAAIF,WAAJ,EAAiB;AACfI,MAAAA,IAAI,CAACE,WAAL,CAAiBC,gBAAS,wBAAQd,QAAR,CAAT,CAAjB;AACD;;AACD,QAAIK,gBAAJ,EAAsB;AACpBM,MAAAA,IAAI,CAACV,MAAL,CAAYA,MAAZ;AACD;;AACD,QAAIE,cAAc,IAAIC,YAAtB,EAAoC;AAClCO,MAAAA,IAAI,CAACI,IAAL,CAAUjB,KAAV,EAAiBC,GAAjB,EAAsB,KAAtB;AACD;;AACD,WAAOY,IAAP;AACD;;AAEDK,EAAAA,IAAI,OAAoC;AAAA,QAAnC;AAAEC,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAmC;;AACtC,QAAI,CAAC,KAAKC,OAAV,EAAmB;AACjB,YAAM,IAAIC,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACDH,IAAAA,MAAM,CAACI,QAAP,CAAgB,KAAKF,OAArB,EAA8BD,KAA9B;AACD;;AAhC6D","sourcesContent":["import { FillType } from \"../../../skia/types\";\nimport type { SkPath } from \"../../../skia/types\";\nimport type { DrawingContext, PathProps } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { enumKey, processPath } from \"../datatypes\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\n\nexport class PathNode extends JsiDrawingNode<PathProps, SkPath> {\n  constructor(ctx: NodeContext, props: PathProps) {\n    super(ctx, NodeType.Path, props);\n  }\n\n  protected deriveProps() {\n    const { start, end, fillType, stroke, ...pathProps } = this.props;\n    const hasStartOffset = start !== 0;\n    const hasEndOffset = end !== 1;\n    const hasStrokeOptions = stroke !== undefined;\n    const hasFillType = !!fillType;\n    const willMutatePath =\n      hasStartOffset || hasEndOffset || hasStrokeOptions || hasFillType;\n    const pristinePath = processPath(this.Skia, pathProps.path);\n    const path = willMutatePath ? pristinePath.copy() : pristinePath;\n    if (hasFillType) {\n      path.setFillType(FillType[enumKey(fillType)]);\n    }\n    if (hasStrokeOptions) {\n      path.stroke(stroke);\n    }\n    if (hasStartOffset || hasEndOffset) {\n      path.trim(start, end, false);\n    }\n    return path;\n  }\n\n  draw({ canvas, paint }: DrawingContext) {\n    if (!this.derived) {\n      throw new Error(\"Path not initialized\");\n    }\n    canvas.drawPath(this.derived, paint);\n  }\n}\n"]}