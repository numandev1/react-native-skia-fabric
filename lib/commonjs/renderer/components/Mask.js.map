{"version":3,"sources":["Mask.tsx"],"names":["Mask","children","mask","mode","clip","Skia","maskPaint","paint","Paint","setBlendMode","BlendMode","Src","setColorFilter","ColorFilter","MakeLumaColorFilter","clippingPaint","DstIn","defaultProps"],"mappings":";;;;;;;AACA;;AAEA;;AACA;;AAEA;;;;;;AASO,MAAMA,IAAI,GAAG,QAA+C;AAAA,MAA9C;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,IAAZ;AAAkBC,IAAAA,IAAlB;AAAwBC,IAAAA;AAAxB,GAA8C;AACjE,QAAM;AAAEC,IAAAA;AAAF,MAAW,2BAAjB;AACA,QAAMC,SAAS,GAAG,oBAAQ,MAAM;AAC9B,UAAMC,KAAK,GAAGF,IAAI,CAACG,KAAL,EAAd;AACAD,IAAAA,KAAK,CAACE,YAAN,CAAmBC,iBAAUC,GAA7B;;AACA,QAAIR,IAAI,KAAK,WAAb,EAA0B;AACxBI,MAAAA,KAAK,CAACK,cAAN,CAAqBP,IAAI,CAACQ,WAAL,CAAiBC,mBAAjB,EAArB;AACD;;AACD,WAAOP,KAAP;AACD,GAPiB,EAOf,CAACF,IAAD,EAAOF,IAAP,CAPe,CAAlB;AAQA,QAAMY,aAAa,GAAG,oBAAQ,MAAM;AAClC,UAAMR,KAAK,GAAGF,IAAI,CAACG,KAAL,EAAd;AACAD,IAAAA,KAAK,CAACE,YAAN,CAAmBC,iBAAUM,KAA7B;AACA,WAAOT,KAAP;AACD,GAJqB,EAInB,CAACF,IAAD,CAJmB,CAAtB;AAKA,sBACE,6BAAC,YAAD;AAAO,IAAA,KAAK;AAAZ,kBACE,6BAAC,YAAD;AAAO,IAAA,KAAK,EAAEC;AAAd,KACGJ,IADH,EAEGE,IAAI,iBAAI,6BAAC,YAAD;AAAO,IAAA,KAAK,EAAEW;AAAd,KAA8Bd,QAA9B,CAFX,CADF,eAKE,6BAAC,YAAD;AAAO,IAAA,SAAS,EAAC;AAAjB,KAA0BA,QAA1B,CALF,CADF;AASD,CAxBM;;;AA0BPD,IAAI,CAACiB,YAAL,GAAoB;AAClBd,EAAAA,IAAI,EAAE,OADY;AAElBC,EAAAA,IAAI,EAAE;AAFY,CAApB","sourcesContent":["import type { ReactNode } from \"react\";\nimport React, { useMemo } from \"react\";\n\nimport { BlendMode } from \"../../skia/types\";\nimport { useCanvas } from \"../useCanvas\";\n\nimport { Group } from \"./Group\";\n\ninterface MaskProps {\n  mode: \"luminance\" | \"alpha\";\n  clip: boolean;\n  mask: ReactNode | ReactNode[];\n  children: ReactNode | ReactNode[];\n}\n\nexport const Mask = ({ children, mask, mode, clip }: MaskProps) => {\n  const { Skia } = useCanvas();\n  const maskPaint = useMemo(() => {\n    const paint = Skia.Paint();\n    paint.setBlendMode(BlendMode.Src);\n    if (mode === \"luminance\") {\n      paint.setColorFilter(Skia.ColorFilter.MakeLumaColorFilter());\n    }\n    return paint;\n  }, [Skia, mode]);\n  const clippingPaint = useMemo(() => {\n    const paint = Skia.Paint();\n    paint.setBlendMode(BlendMode.DstIn);\n    return paint;\n  }, [Skia]);\n  return (\n    <Group layer>\n      <Group layer={maskPaint}>\n        {mask}\n        {clip && <Group layer={clippingPaint}>{children}</Group>}\n      </Group>\n      <Group blendMode=\"srcIn\">{children}</Group>\n    </Group>\n  );\n};\n\nMask.defaultProps = {\n  mode: \"alpha\",\n  clip: true,\n};\n"]}